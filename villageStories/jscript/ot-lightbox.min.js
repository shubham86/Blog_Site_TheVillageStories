function takeNextPhoto(e) { var t = jQuery(".lightbox-photo").eq(e).attr("href"); setTimeout("setImageSize('" + t + "')", 500) } function setImageSize(e) { var t = new Image; t.onload = function () { if (jQuery(window).height() - 150 >= t.height && jQuery(window).width() >= t.width - 150) var o = t.height, r = t.width; else if (jQuery(window).width() <= jQuery(window).height()) if (t.width <= t.height) var r = t.width / t.height * (jQuery(window).height() - 150), o = t.height / t.width * r; else var o = t.height / t.width * (jQuery(window).width() - 150), r = t.width / t.height * o; else var r = t.width / t.height * (jQuery(window).height() - 150), o = t.height / t.width * r; var i = jQuery(window).scrollTop(); jQuery("#lightbox-box > div > img").attr("src", "images/px.gif"), jQuery("#lightbox-box > div").css("height", o + "px").css("width", r + "px").css("top", jQuery(window).height() / 2 - o / 2 + i + "px").css("left", jQuery(window).width() / 2 - r / 2 + "px"), jQuery("#lightbox-box").addClass("blackout"), thetop = parseInt(jQuery(window).height() / 2 - o / 2), setTimeout(function () { jQuery("#lightbox-box > a").fadeIn("slow"), jQuery("#lightbox-box > div > span").fadeIn("slow"), jQuery("#lightbox-box > div > font").fadeIn("slow"), jQuery("#lightbox-box > div > img").attr("src", e), thisimage = e }, 500) }, jQuery(".lightbox-bg").click(function () { jQuery(this).parent().remove() }).children().click(function (e) { return !1 }), jQuery("#lightbox-box > a").click(function () { return jQuery(this).parent().remove(), !1 }), jQuery("#lightbox-left").click(function () { jQuery("#lightbox-box").removeClass("blackout"); var e = jQuery(".lightbox-photo").length; for (n = 0; n < e; n++)if (jQuery(".lightbox-photo").eq(n).attr("href") == thisimage) if (n - 1 <= 0) var t = e - 1; else var t = n - 1; return jQuery("#lightbox-box > div > span").remove(), jQuery(".lightbox-photo").eq(t).attr("title") && jQuery("#lightbox-box > div > img").before("<span>" + jQuery(".lightbox-photo").eq(t).attr("title") + "</span>"), takeNextPhoto(t), !1 }), jQuery("#lightbox-right").click(function () { jQuery("#lightbox-box").removeClass("blackout"); var e = jQuery(".lightbox-photo").length; for (n = 0; n < e; n++)if (jQuery(".lightbox-photo").eq(n).attr("href") == thisimage) if (n + 1 >= e) var t = 0; else var t = parseInt(n) + 1; return jQuery("#lightbox-box > div > span").remove(), jQuery(".lightbox-photo").eq(t).attr("title") && jQuery("#lightbox-box > div > img").before("<span>" + jQuery(".lightbox-photo").eq(t).attr("title") + "</span>"), takeNextPhoto(t), !1 }), t.src = e } var imageSrc = "", thisimage = ""; jQuery(document).ready(function () { var e = jQuery(".lightbox-photo").length; jQuery(".lightbox-photo").click(function () { var t = jQuery(this).attr("href"), o = jQuery(this).offset(); return jQuery("body").before("<div id='lightbox-box'><a href='#'>Close</a><div style='top:" + o.top + "px;left:" + o.left + "px;width:" + jQuery(this).find("img").width() + "px;height:" + jQuery(this).find("img").height() + "px;'><img src='images/px.gif' alt='' title='' /></div><span class='lightbox-bg'></span></div>"), jQuery(this).attr("title") && jQuery("#lightbox-box > div > img").before("<span>" + jQuery(this).attr("title") + "</span>"), e > 1 && jQuery("#lightbox-box > div > img").before("<font><a href='#' id='lightbox-left'><-</a><a href='#' id='lightbox-right'>-></a></font>"), setTimeout("setImageSize('" + t + "')", 500), !1 }) }), jQuery(window).resize(function () { }); var thetop = 0; jQuery(document).scroll(function () { if (jQuery("#lightbox-box > div")) { var e = parseInt(jQuery(window).scrollTop()); jQuery("#lightbox-box > div").css("top", parseInt(e + thetop) + "px") } });
